/*!
Deck JS - deck.scale
Copyright (c) 2011-2014 Caleb Troughton
Dual licensed under the MIT license.
https://github.com/imakewebthings/deck.js/blob/master/MIT-license.txt
*/
!function(e){var c,s,n=e(document),a=e(window),l=function(){var c=e.deck("getOptions"),n=e.deck("getContainer"),a=c.baseHeight;a||(a=n.height()),e.each(s,function(e,s){var l=s.innerHeight(),t=s.find("."+c.classes.scaleSlideWrapper),i=n.hasClass(c.classes.scale)?a/l:1;1===i?t.css("transform",""):(t.css("transform","scale("+i+")"),window.setTimeout(function(){n.scrollTop(0)},1))})},t=function(){var c=e.deck("getOptions"),n=e.map([c.classes.before,c.classes.previous,c.classes.current,c.classes.next,c.classes.after],function(e){return"."+e}).join(", ");s=[],e.each(e.deck("getSlides"),function(e,a){a.parentsUntil(c.selectors.container,n).length||s.push(a)})},i=function(){var c='<div class="'+e.deck("getOptions").classes.scaleSlideWrapper+'"/>';e.each(s,function(e,s){s.children().wrapAll(c)})},d=function(){var s=e.deck("getOptions");a.unbind("resize.deckscale"),a.bind("resize.deckscale",function(){window.clearTimeout(c),c=window.setTimeout(l,s.scaleDebounce)}),e.deck("enableScale"),a.unbind("load.deckscale"),a.bind("load.deckscale",l)},o=function(){var c=e.deck("getOptions");n.unbind("keydown.deckscale"),n.bind("keydown.deckscale",function(s){var n=s.which===c.keys.scale;(n=n||e.inArray(s.which,c.keys.scale)>-1)&&(e.deck("toggleScale"),s.preventDefault())})};e.extend(!0,e.deck.defaults,{classes:{scale:"deck-scale",scaleSlideWrapper:"deck-slide-scaler"},keys:{scale:83},baseHeight:null,scaleDebounce:200}),e.deck("extend","disableScale",function(){e.deck("getContainer").removeClass(e.deck("getOptions").classes.scale),l()}),e.deck("extend","enableScale",function(){e.deck("getContainer").addClass(e.deck("getOptions").classes.scale),l()}),e.deck("extend","toggleScale",function(){var c=e.deck("getContainer").hasClass(e.deck("getOptions").classes.scale);e.deck(c?"disableScale":"enableScale")}),n.bind("deck.init",function(){t(),i(),d(),o()})}(jQuery);